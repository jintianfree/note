---
title: "This is a hidden post."
date: 2018-03-08T17:40:19+08:00
lastmod: 2018-03-08T22:01:19+08:00
draft: true
author: "Cheney"

hiddenFromHomePage: true
---



(1, 'Linux系统的expect引起的resize问题解决', 'expect脚本自动ssh登陆，当终端窗口发生变化时，默认expect不会将终端窗口大小改变的信号传送到远程的服务器上，因此在使用上会出现很不方便的地方，比如vim打开文件时出现串行，要是含有中文的文件可能根本无法编辑。\n解决：捕获窗口大小改变的信号。\n \n [code]#!/usr/bin/env expect \n\n#trap sigwinch spawned\ntrap {\n set rows [stty rows]\n set cols [stty columns]\n stty rows $rows columns $cols &lt; $spawn_out(slave,name)\n} WINCH\n\nset server xxx.xxx.xxx.xxx\nset user root\nset passwd *******\n\nspawn ssh $user@$server\n\nexpect -re &quot;password:&quot;\n\nsend &quot;${passwd}\\r&quot;\n\nexpect -re &quot;$&quot;\n\ninteract[/code]\n \n参考：\n[url]https://cygwin.com/ml/cygwin/2010-05/msg00204.html[/url]\n \nHans Horn&lt;hannes@2horns.com&gt; writes:\n\nDavid,\n\nThis took me forever to figure out!\n\n\'expect\' does not forward SIGWINCH\n(http://en.wikipedia.org/wiki/SIGWINCH) unless told to do so.\n\nAdd the following snippet (between lines marked with\n###################) to the beginning of your \'expect\' script:\n\n#!/bin/sh\n# \\\nexec expect -f &quot;$0&quot; ${1+&quot;$@&quot;}\n\n###################\ntrap { # trap sigwinch and pass it to the child we spawned\n   set rows [stty rows]\n   set cols [stty columns]\n   stty rows $rows columns $cols&lt;  $spawn_out(slave,name)\n} WINCH\n###################\n\nset host [lindex $argv 0]\n...\n\nI use this to log on from cygwin to various AIX and LINUX machines.\n\nGood luck and let me know how goes,\nHans\n\n\nThat worked perfectly!  Thank you very much, I don\'t think I would have\never figured that out!\n\nDave', 1507701711, 1507701711, 3, 0, 0, 48, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.6627578316816, 1509504173, 0, 0, 0, 'linux 3199532479 expect 2434136215 resize 3838239064 3529920915', 0, NULL, NULL, NULL, 0),



(2, 'rz 上传文件失败问题', '在把Windows上的文件传至Linux端时用到SecureCRT，一般小文件都没有问题，文件太大时则出现了上传后的文件只有几K大小，当然大于2个G的是不可能传的上去的了。对于几百M到1G多的大文件要如下处理。\n\n单独用rz会有两个问题：上传中断、上传文件变化（md5不同），\n解决办法是上传是用rz -be，并且去掉弹出的对话框中“Upload files as ASCII”前的勾选。\n-a, –ascii\n-b, –binary 用binary的方式上传下载，不解释字符为ascii\n-e, –escape 强制escape 所有控制字符，比如Ctrl+x，DEL等\nrar,gif等文件文件采用 -b 用binary的方式上传。\n文件比较大而上传出错的话，采用参数 -e\n如果用不带参数的rz命令上传大文件时，常常上传一半就断掉了，很可能是rz以为上传的流中包含某些特殊控制字符，造成rz提前退出。', 1507708037, 1507708037, 3, 0, 0, 11, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 1.9542425094393, 1509504213, 0, 0, 0, 'rz 1997820256 2599120214 2283336133 3838239064', 0, NULL, NULL, NULL, 0),


(3, 'git 如何处理 *(no branch)的情况', '在使用git branch命令查看当前环境所在的开发分支时，如果出现*(no branch),则表示当前不处于任何分支，这时可以通过如下几种方法处理，以便于后续项目版本的管理：\n\n1：git checkout -b 分支名；此时新创建的分支与*（no branch）软件一样\n\n2：如果想将*（no branch）合并到主分支master，则首先执行git log命令，记住第一行的id号，然后执行git checkout master命令，此时出现的第一行信息中也会出现一个id号，与之前执行git log中第一行出现的id号是一致的，此时就已经切换到了主分支上来了，然后执行git merge id将*（no branch）软件合并到主分支；\n\n如果主分支与*（no branch）软件内容有差异的文件比较多，则建议使用第一种方法，如果有差异的软件不多，则可以使用第二种方法。', 1507708240, 1507708240, 3, 0, 0, 41, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.602059991328, 1509534154, 0, 0, 0, 'git 2278829702 branch 2477320917', 0, NULL, NULL, NULL, 0),




(4, '处理器亲和性(Processor Affinity) CPU绑定 CPU隔离怎么设置', '1、绑定CPU \n使用taskset命令\n\nman taskset\nmask  value:\n       0x00000001\n              is processor #0\n       0x00000003\n              is processors #0 and #1\n       0xFFFFFFFF\n              is all processors (#0 through #31).\nusage:\n      The default behavior is to run a new  command  with  a  given  affinity  mask:\n              taskset mask command [arguments]\n\n       You can also retrieve the CPU affinity of an existing task:\n              taskset -p pid\n\n       Or set it:\n              taskset -p mask pid\n\n2、CPU隔离\n在linux内核启动的命令行加上\'isolcpus=\' 参数，可以实现CPU的隔离，使系统启动后普通进场默认都不会调度到被隔离的CPU上执行\n例如：以下隔离了cpu2和cpu3的grub配置文件\n\ntitle Red Hat Enterprise Linux Server(3.5.0)\n     root(hd0,0)\n    kernel /boot/vmlinuz-3.5.0 ro\nroot=UUID=1a65b4bb-cd0b-3bbf-97ff-7e1f698d3db isolcpus=2,3\n     initrd /boot/initramfs-3.5.0.img\n ', 1507708402, 1507708402, 3, 0, 0, 15, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.1461280356782, 1509538698, 0, 0, 0, '227882970222120 201462164424615 processor affinity cpu 3246523450 3854831163 3577432622', 0, NULL, NULL, NULL, 0),



(5, 'CentOS下 IP地址莫名其妙被改 有时几个接口被配成同一个IP 启动后IP地址与ifcfg-eth* 中配置的不一致', '原因是开启了NetworkManager服务，要么学会使用NetworkManager，要么粗暴的禁用掉他\n\n禁用方法：\nchkconfig NetworkManager off reboot\nOK，世界清静了', 1507713294, 1507713294, 3, 0, 0, 26, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.3802112417116, 1509504225, 0, 0, 0, 'centos ip 2232022336 33707215172085422937 2096020010 2550921475 3719725104 215161996820010 2155121160 ifcfgeth 3719732622 199811996833268', 0, NULL, NULL, NULL, 0),
(6, 'xargs 使用技巧总结', '\nfind /var/log | grep maillog- | xargs -t -r rm -v\n删除匹配\'\'的文件\n \n-t  表示先打印命令，然后再执行\n-r  no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了\n ', 1507713429, 1507713429, 3, 0, 0, 18, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.2304489213783, 1509510280, 0, 0, 0, 'xargs 20351299922521624039 2463532467', 0, NULL, NULL, NULL, 0),



(7, 'git push 没有把tag push上去', 'git tag只是在本地仓库打标签而已\n默认情况下，git push并不会把tag标签传送到远端服务器上，只有通过显式命令才能分享标签到远端仓库\n\npush单个tag，命令格式为：\ngit push origin [tagname]\npush所有tag，命令格式为：\ngit push [origin] --tags\n ', 1507713463, 1507713463, 3, 0, 0, 22, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.301029995664, 1509504215, 0, 0, 0, 'git push tag 1997821435', 0, NULL, NULL, NULL, 0),




(8, 'vim配合ctags看代码  按ctrl+]  提示 tag 1 of 2 or more 而不是显示列表供选择', '方法一\n使用g + ] 代替  ctrl + ]\n \n方法二\n.vimrc 中加入下列配置\n:noremap &lt;C-]&gt; g&lt;C-]&gt;\n:noremap g&lt;C-]&gt; &lt;C-]&gt;\n \n方法三\n修改ctags配置  使用下面的方式指定tags文件  而不是使用具体的tags文件\n:set tags=tags;/', 1507713547, 1507713547, 3, 0, 0, 97, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.9777236052888, 1509504220, 0, 0, 0, 'vim 3719721512 ctags 2019530721 ctrl 2555231034 tag 1998126159 2617431034 2101534920 3687325321', 0, NULL, N
ULL, NULL, 0),


(9, '推荐mac下ssh客户端 zoc', '可以使用sz rz \n 分享zoc注册码 (zoc license code)1st part: 51698/01027/34713\n2nd part: 00937\n \nzoc 7.08.0(intel)  亲测可用\n ', 1507713815, 1507713815, 3, 0, 0, 31, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.4771212547197, 1509504832, 0, 0, 0, '2551233616 mac ssh 234582514331471 zoc', 0, NULL, NULL, NULL, 0),
(10, '推荐mac下ssh客户端 zoc', '可以使用sz rz \n 分享zoc注册码 (zoc license code)1st part: 51698/01027/34713\n2nd part: 00937\n \nzoc 7.08.0(intel)  亲测可用\n ', 1507713815, 1507713815, 3, 0, 0, 15, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.1461280356782, 1509504524, 0, 0, 0, '2551233616 mac ssh 234582514331471 zoc', 0, NULL, NULL, NULL, 0),
(11, '推荐一个爬虫框架  Scrapy', 'Scrapy是一个基于Twisted，纯Python实现的爬虫框架，用户只需要定制开发几个模块就可以轻松的实现一个爬虫，用来抓取网页内容以及各种图片，非常之方便～', 1507731005, 1507731005, 3, 0, 0, 43, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.6127838567197, 1509503894, 0, 0, 0, '2551233616 1996820010 2922834411 2669426550 scrapy', 0, NULL, NULL, NULL, 0),
(13, 'hive 使用总结', '[b]hive select count 使用distinct 去重[/b]\n \n[code]select count(distinct name) from log where day=20160920;[/code]', 1507874971, 1508473383, 3, 4, 4, 46, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 4, 2.6334684555796, 1509504235, 0, 0, 0, 'hive 2035129992 2463532467', 0, NULL, NULL, NULL, 0),
(14, '北京外语广播  英语PK台 最简语法索引', '博客问答 http://wenda.dreamshare.in/?/question/14 辛苦整理  转载请注明出处', 1508034767, 1508472828, 3, 3, 3, 104, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 1875210792, 8, 3.0043213737826, 1509504373, 0, 0, 0, '2127120140 2280635821 2419125773 3352135821 pk 2636831616 3582127861 3203424341', 0, NULL, NULL, NULL, 0),
(16, 'python  时间转换', '[b][size=20]类型[/size][/b]\n\n[b]字符串[/b]\n[code]t_str = &quot;2017-09-10 10:10:10&quot;\nprint t_str\nprint type(t_str)\n\n#] 2017-09-10 10:10:10\n#] &lt;type \'str\'&gt;[/code]\n\n[b]时间戳[/b]\n[code]t_float = time.time()\nprint t_float\nprint type(t_float)\n\n#] 1508412454.81\n#] &lt;type \'float\'&gt;[/code]\n\n[b]时间结构体[/b]\n[code]t_time_struct = time.localtime()\nprint t_time_struct\nprint type(t_time_struct)\n\n#] time.struct_time(tm_year=2017, tm_mon=10, tm_mday=19, tm_hour=19, tm_min=27, tm_sec=34, tm_wday=3, tm_yday=292, tm_isdst=0)\n#] &lt;type \'time.struct_time\'&gt;[/code]\n\n[b][size=20]相互转换[/size][/b]\n\n[b]字符串转时间结构体[/b]\n[code]# str-&gt;time_struct\nprint time.strptime(t_str, &quot;%Y-%m-%d %H:%M:%S&quot;)\nprint type(time.strptime(t_str, &quot;%Y-%m-%d %H:%M:%S&quot;))\n\n#] time.struct_time(tm_year=2017, tm_mon=9, tm_mday=10, tm_hour=10, tm_min=10, tm_sec=10, tm_wday=6, tm_yday=253, tm_isdst=-1)\n#] &lt;type \'time.struct_time\'&gt;[/code]\n\n[b]字符串转时间戳[/b]\n[code]# str-&gt;float\nprint time.mktime(time.strptime(t_str, &quot;%Y-%m-%d %H:%M:%S&quot;))\nprint type(time.mktime(time.strptime(t_str, &quot;%Y-%m-%d %H:%M:%S&quot;)))\n\n#] 1505009410.0\n#] &lt;type \'float\'&gt;[/code]\n\n[b]时间结构体转时间戳[/b]\n[code]# time_struct-&gt;float\nprint time.mktime(t_time_struct)\nprint type(time.mktime(t_time_struct))\n\n#] 1508412454.0\n#] &lt;type \'float\'&gt;[/code]\n\n[b]时间结构体转字符串[/b]\n[code]# time_struct-&gt;str\nprint time.strftime(\'%Y-%m-%d %H:%M:%S\', t_time_struct)\nprint type(time.strftime(\'%Y-%m-%d %H:%M:%S\', t_time_struct))\n\n#] 2017-10-19 19:27:34\n#] &lt;type \'str\'&gt;[/code]\n\n[b]时间戳转时间结构体[/b]\n[code]# float-&gt;time_struct\nprint time.localtime(t_float)\nprint type(time.localtime(t_float))\n\n#] time.struct_time(tm_year=2017, tm_mon=10, tm_mday=19, tm_hour=19, tm_min=27, tm_sec=34, tm_wday=3, tm_yday=292, tm_isdst=0)\n#] &lt;type \'time.struct_time\'&gt;[/code]\n\n[b]时间戳转字符串[/b]\n[code]# float-&gt;str\nprint time.strftime(\'%Y-%m-%d %H:%M:%S\', time.localtime(t_float))\nprint type(time.strftime(\'%Y-%m-%d %H:%M:%S\', time.localtime(t_float)))\n\n#] 2017-10-19 19:27:34\n#] &lt;type \'str\'&gt;[/code]\n\n\n', 1508414578, 1508470079, 3, 1, 1, 28, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 9, 2.431363764159, 1509511101, 0, 0, 0, 'python 2610238388 3671625442', 0, NULL, NULL, NULL, 0),
(17, 'ssh ControlPersist 避免多次输入密码 多次验证', '[code]#] cat .ssh/config\nHost *\nControlMaster auto\nControlPath ~/.ssh/%h-%p-%r\nControlPersist yes\n[/code]', 1508469215, 1508469215, 3, 0, 0, 9, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 1.8450980400143, 1509504378, 0, 0, 0, 'ssh controlpersist 3699120813 2281027425 3675520837 2349430721 3956435777', 0, NULL, NULL, NULL, 0),
(18, 'VirtualBox中的Ubuntu没有权限访问通过VirtualBox设置的共享文件夹', '[code]ls: cannot open directory /media/sf_work/: Permission denied[/code]', 1508469571, 1508469606, 3, 1, 1, 18, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 10, 2.1760912590557, 1509504376, 0, 0, 0, 'virtualbox ubuntu 2643538480 3577538382 3577432622 2084920139 259912021422841', 0, NULL, NULL, NULL, 0),
(19, 'python log简单处理', '[b]1.简单的将日志打印到屏幕[/b]\n\n[code]import logging\n\nlogging.debug(\'This is debug message\')\nlogging.info(\'This is info message\')\nlogging.warning(\'This is warning message\')\n \n屏幕上打印:\nWARNING:root:This is warning message[/code]\n默认情况下，logging将日志打印到屏幕，日志级别为WARNING；\n日志级别大小关系为：CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG &gt; NOTSET，当然也可以自己定义日志级别。\n\n[b]2.通过logging.basicConfig函数对日志的输出格式及方式做相关配置[/b]\n\n[code]import logging\n\nlogging.basicConfig(level=logging.DEBUG,\n                format=\'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s\',\n                datefmt=\'%a, %d %b %Y %H:%M:%S\',\n                filename=\'myapp.log\',\n                filemode=\'w\')\n    \nlogging.debug(\'This is debug message\')\nlogging.info(\'This is info message\')\nlogging.warning(\'This is warning message\')\n \n./myapp.log文件中内容为:\nSun, 24 May 2009 21:48:54 demo2.py[line:11] DEBUG This is debug message\nSun, 24 May 2009 21:48:54 demo2.py[line:12] INFO This is info message\nSun, 24 May 2009 21:48:54 demo2.py[line:13] WARNING This is warning message[/code]\n\n\nlogging.basicConfig函数各参数:\n\n[code]filename: 指定日志文件名\nfilemode: 和file函数意义相同，指定日志文件的打开模式，\'w\'或\'a\'\nformat: 指定输出的格式和内容，format可以输出很多有用信息，如上例所示:\n %(levelno)s: 打印日志级别的数值\n %(levelname)s: 打印日志级别名称\n %(pathname)s: 打印当前执行程序的路径，其实就是sys.argv[0]\n %(filename)s: 打印当前执行程序名\n %(funcName)s: 打印日志的当前函数\n %(lineno)d: 打印日志的当前行号\n %(asctime)s: 打印日志的时间\n %(thread)d: 打印线程ID\n %(threadName)s: 打印线程名称\n %(process)d: 打印进程ID\n %(message)s: 打印日志信息\ndatefmt: 指定时间格式，同time.strftime()\nlevel: 设置日志级别，默认为logging.WARNING\nstream: 指定将日志的输出流，可以指定输出到sys.stderr,sys.stdout或者文件，默认输出到sys.stderr，当stream和filename同时指定时，stream被忽略[/code]\n\n更多参考：\nhttp://www.cnblogs.com/dkblog/archive/2011/08/26/2155018.html\nhttps://docs.python.org/2/library/logging.html', 1508492335, 1508492335, 3, 0, 0, 55, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 0, 2.732393759823, 1509535930, 0, 0, 0, 'python log 3161621333 2278829702', 0, NULL, NULL, NULL, 0),
(20, 'shell date  时间字符串转换', '[code]day=`date -d &quot;1 days ago&quot; +%Y%m%d`\nstart=`date -d $day +&quot;%Y-%m-%d&quot;`  \nend=`date -d &quot;$start +1 days&quot; +&quot;%Y-%m-%d&quot;`  [/code]\n\n稍后补充', 1508503299, 1509511056, 3, 1, 1, 32, 1, 0, 0, 1, 0, 0, 0, 0, NULL, 0, 2942618366, 11, 2.4913616938343, 1509536059, 0, 0, 0, 'shell date 2610238388 233833152620018 3671625442', 0, NULL, NULL, NULL, 0);

